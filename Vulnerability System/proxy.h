//本部分专门用来实现数据库相关函数的实现
#pragma once
#include"mysql.h"
#include"pch.h"
#include "User.h"
#include "vulnerability.h"


class VulMysql
{
public:	
	VulMysql(
		MYSQL&& mysql,//数据库句柄
		MYSQL_RES* res,//查询结果集
		MYSQL_ROW && row,//记录结构体
		std::string&& type
	);
	~VulMysql();

	int ConnectMysql();
	int InsertMysql(int&& id, std::string&& name, std::string&& product, std::string&& company, short&& risk_level, int&& industry, std::set<int>&& type_exist, std::string&& description);
	int InsertMysql();
	int ModifyMysql(int&& id, std::string&& type);//不知道为什么报错
	int UpdateMysql(int id);
	int DeleteMysql(int id);
	void FreeMysql();
private:
		MYSQL _mysql;
		MYSQL_RES* _res;
		MYSQL_ROW _row;
		std::string _type;
		std::unique_ptr<User> _user;
		std::unique_ptr<Vulnerability> _vulnerability;
};


